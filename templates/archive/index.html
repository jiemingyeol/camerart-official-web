{% extends "layout.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/archive.css') }}">
{% endblock %}

{% block page_class %}archive-{{ current_page }}{% endblock %}

{% block content %}
<div class="exhibition-container">
    <!-- 왼쪽 포스터 영역 -->
    <div class="exhibition-left">
        {% if has_carousel %}
        <div class="poster-carousel">
            <button class="carousel-btn prev">‹</button>
            <ul class="carousel-track">
                {% for img in exhibition.images.poster_carousel %}
                <li class="carousel-slide"><img src="{{ url_for('static', filename=img) }}" alt="포스터"></li>
                {% endfor %}
            </ul>
            <button class="carousel-btn next">›</button>
        </div>
        {% else %}
        <img src="{{ url_for('static', filename=exhibition.images.poster) }}" alt="전시 포스터">
        {% endif %}
    </div>

    <!-- 중앙 수직선 -->
    <div class="vertical-divider"></div>

    <!-- 오른쪽 텍스트 영역 -->
    <div class="exhibition-right">
        <!-- 전시 제목 -->
        <h1 class="exhibition-title">{{ exhibition.title | safe }}</h1>

        <!-- 장소 + 일시 -->
        <p class="exhibition-info">{{ exhibition.info | safe }}</p>
        <hr class="exhibition-divider">

        <!-- ① Description -->
        <p class="exhibition-description">{{ exhibition.description | safe }}</p>

        <!-- ② Artist -->
        <p class="exhibition-artist">{{ exhibition.artist | safe }}</p>

        <!-- ③ 두 번째 구분선 -->
        <hr class="exhibition-divider2">
        <!-- Installation Views Header -->
        {% if exhibition.images.installation %}
            <!-- Installation Views Header -->
            <div class="installation-header">
                <img class="installation-arrow" src="{{ url_for('static', filename='images/icons/arrow.png') }}" alt="arrow">
                <span class="installation-title">(INSTALLATION VIEWS)</span>
            </div>

            <div class="installation-container">
                <div class="scroll-gallery draggable-scroll" id="installScroll">
                    {% for img in exhibition.images.installation %}
                    <div class="install-slide">
                        <img src="{{ url_for('static', filename=img) }}" alt="installation">
                    </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
        {% if exhibition.images.works %}
            <!-- WORKS 헤더 -->
            <div class="works-header-section">
                <img class="works-arrow" src="{{ url_for('static', filename='images/icons/arrow.png') }}" alt="arrow">
                <span class="works-title">(WORKS)</span>
                <a class="works-more" href="{{ url_for('archive_works', num=current_page) }}">MORE</a>
            </div>

            <!-- WORKS image -->
            <div class="works-manual" id="worksManual">
                {% for work in exhibition.images.works %}
                <div class="work-item"
                    data-x="{{ work.x }}"
                    data-y="{{ work.y }}"
                    data-w="{{ work.width }}"
                    data-h="{{ work.height }}">
                    <img src="{{ url_for('static', filename=work.image) }}" alt="work image">
                    <p class="work-caption">{{ work.caption }}</p>
                </div>
            {% endfor %}
            </div>
        {% endif %}
        <!-- FUNDING -->
        <!-- FUNDING 헤더 -->
        <div class="funding-header-section funding-manual"
            id="fundingManual"
            data-x="{{ exhibition.images.funding_position.x }}"
            data-y="{{ exhibition.images.funding_position.y }}">
            <img class="funding-arrow" src="{{ url_for('static', filename='images/icons/arrow.png') }}" alt="arrow">
            <span class="funding-title">(FUNDING)</span>
        </div>

        <!-- FUNDING 이미지 -->
        <div class="funding-container funding-manual-img">
            <img src="{{ url_for('static', filename=exhibition.images.funding) }}" alt="funding">
        </div>
    </div>
</div>
{% endblock %}
